(function(){var e=window.BX;if(!!e.CrmUISelector){return}e.CrmUISelector={onGetEntityTypes:function(t){if(!e.type.isNotEmptyObject(t)||!e.type.isNotEmptyObject(t.selector)){return}var i=t.selector;if(i.getOption("enableCrm")!="Y"){return}if(i.getOption("enableCrmContacts")=="Y"){i.entityTypes.CONTACTS={options:{enableSearch:"Y",searchById:"Y",addTab:i.getOption("addTabCrmContacts")=="Y"?"Y":"N",onlyWithEmail:i.getOption("onlyWithEmail")=="Y"?"Y":"N",prefixType:e.type.isNotEmptyString(i.getOption("crmPrefixType"))?i.getOption("crmPrefixType"):"FULL"}}}if(i.getOption("enableCrmCompanies")=="Y"){i.entityTypes.COMPANIES={options:{enableSearch:"Y",searchById:"Y",addTab:i.getOption("addTabCrmCompanies")=="Y"?"Y":"N",onlyWithEmail:i.getOption("onlyWithEmail")=="Y"?"Y":"N",onlyMy:i.getOption("onlyMyCompanies")=="Y"?"Y":"N",prefixType:e.type.isNotEmptyString(i.getOption("crmPrefixType"))?i.getOption("crmPrefixType"):"FULL"}}}if(i.getOption("enableCrmLeads")=="Y"){i.entityTypes.LEADS={options:{enableSearch:"Y",searchById:"Y",addTab:i.getOption("addTabCrmLeads")=="Y"?"Y":"N",onlyWithEmail:i.getOption("onlyWithEmail")=="Y"?"Y":"N",prefixType:e.type.isNotEmptyString(i.getOption("crmPrefixType"))?i.getOption("crmPrefixType"):"FULL"}}}if(i.getOption("enableCrmDeals")=="Y"){i.entityTypes.DEALS={options:{enableSearch:"Y",searchById:"Y",addTab:i.getOption("addTabCrmDeals")=="Y"?"Y":"N",prefixType:e.type.isNotEmptyString(i.getOption("crmPrefixType"))?i.getOption("crmPrefixType"):"FULL"}}}if(i.getOption("enableCrmOrders")=="Y"){i.entityTypes.ORDERS={options:{enableSearch:"Y",searchById:"Y",addTab:i.getOption("addTabCrmOrders")=="Y"?"Y":"N",prefixType:e.type.isNotEmptyString(i.getOption("crmPrefixType"))?i.getOption("crmPrefixType"):"FULL"}}}if(i.getOption("enableCrmProducts")=="Y"){i.entityTypes.PRODUCTS={options:{enableSearch:"Y",searchById:"Y",addTab:i.getOption("addTabCrmProducts")=="Y"?"Y":"N",prefixType:e.type.isNotEmptyString(i.getOption("crmPrefixType"))?i.getOption("crmPrefixType"):"FULL"}}}if(i.getOption("enableCrmQuotes")=="Y"){i.entityTypes.QUOTES={options:{enableSearch:"Y",searchById:"Y",addTab:i.getOption("addTabCrmQuotes")=="Y"?"Y":"N",prefixType:e.type.isNotEmptyString(i.getOption("crmPrefixType"))?i.getOption("crmPrefixType"):"FULL"}}}},onSearchRequestCallbackSussess:function(t){if(!e.type.isNotEmptyObject(t)||!e.type.isNotEmptyObject(t.responseData)||!e.type.isNotEmptyObject(t.responseData.ENTITIES)||!e.type.isNotEmptyObject(t.selector)){return}var i=t.responseData,r=t.selector;var n=["CONTACTS","COMPANIES","LEADS","DEALS","ORDERS","PRODUCTS","QUOTES"],s=null;for(var o=0;o<n.length;o++){s=[n[o]];if(e.type.isNotEmptyObject(i.ENTITIES[s])&&e.type.isNotEmptyObject(i.ENTITIES[s].ITEMS)){for(var p in i.ENTITIES[s].ITEMS){if(!i.ENTITIES[s].ITEMS.hasOwnProperty(p)){continue}r.entities[s].items[p]=i.ENTITIES[s].ITEMS[p];if(e.type.isNotEmptyObject(t.eventResult)){t.eventResult.found=true;t.eventResult.itemCodeList.push(p)}}}}},onFilterDestinationSelectorConvert:function(t,i){if(!e.type.isNotEmptyObject(t)||!e.type.isNotEmptyString(t.selectorId)||!e.type.isNotEmptyString(t.value)||!e.type.isNotEmptyObject(e.Main)||!e.type.isNotEmptyObject(e.Main.selectorManagerV2)||!e.type.isObject(i)){return}var r=e.Main.selectorManagerV2.getById(t.selectorId);if(!e.type.isNotEmptyObject(r)){return}if(r.getOption("convertJson")=="Y"){var n=null,s=null;if(n=t.value.match(/CRMQUOTE(\d+)/)){s={QUOTE:[parseInt(n[1])]}}else if(n=t.value.match(/CRMPRODUCT(\d+)/)){s={PRODUCT:[parseInt(n[1])]}}else if(n=t.value.match(/CRMCOMPANY(\d+)/)){s={COMPANY:[parseInt(n[1])]}}else if(n=t.value.match(/CRMCONTACT(\d+)/)){s={CONTACT:[parseInt(n[1])]}}else if(n=t.value.match(/CRMLEAD(\d+)/)){s={LEAD:[parseInt(n[1])]}}else if(n=t.value.match(/CRMDEAL(\d+)/)){s={DEAL:[parseInt(n[1])]}}if(e.type.isNotEmptyObject(s)){i.value=JSON.stringify(s)}}},setFilterSelected:function(t){if(!e.type.isNotEmptyObject(t)||!e.type.isNotEmptyString(t.selectorId)||!e.type.isNotEmptyObject(e.UI.SelectorManager)||!e.type.isNotEmptyObject(e.Main)||!e.type.isNotEmptyObject(e.Main.selectorManagerV2)){return}var i=e.UI.SelectorManager.instances[t.selectorId],r=e.Main.selectorManagerV2.getById(t.selectorId);if(!e.type.isNotEmptyObject(i)||!e.type.isNotEmptyObject(r)){return}var n=r.getOption("isNumeric"),s=r.getOption("prefix"),o=r.getOption("convertJson"),p=null;if(o=="Y"&&e.type.isNotEmptyString(t.current.value)){var a=JSON.parse(t.current.value);if(e.type.isNotEmptyObject(a)){if(e.type.isArray(a.QUOTE)){for(p=0;p<a.QUOTE.length;p++){r.items.selected["CRMQUOTE"+a.QUOTE[p]]="quotes"}}if(e.type.isArray(a.ORDER)){for(p=0;p<a.ORDER.length;p++){r.items.selected["CRMORDER"+a.ORDER[p]]="orders"}}if(e.type.isArray(a.PRODUCT)){for(p=0;p<a.PRODUCT.length;p++){r.items.selected["CRMPRODUCT"+a.ORDER[p]]="products"}}if(e.type.isArray(a.DEAL)){for(p=0;p<a.DEAL.length;p++){r.items.selected["CRMDEAL"+a.DEAL[p]]="deals"}}if(e.type.isArray(a.LEAD)){for(p=0;p<a.LEAD.length;p++){r.items.selected["CRMLEAD"+a.LEAD[p]]="leads"}}if(e.type.isArray(a.CONTACT)){for(p=0;p<a.CONTACT.length;p++){r.items.selected["CRMCONTACT"+a.CONTACT[p]]="contacts"}}if(e.type.isArray(a.COMPANY)){for(p=0;p<a.COMPANY.length;p++){r.items.selected["CRMCOMPANY"+a.COMPANY[p]]="companies"}}}}else if(n=="Y"){if(s=="CRMCOMPANY"){r.items.selected[s+t.current.value]="companies"}else if(s=="CRMCONTACT"){r.items.selected[s+t.current.value]="contacts"}else if(s=="CRMLEAD"){r.items.selected[s+t.current.value]="leads"}else if(s=="CRMDEAL"){r.items.selected[s+t.current.value]="deals"}else if(s=="CRMORDER"){r.items.selected[s+t.current.value]="orders"}else if(s=="CRMPRODUCT"){r.items.selected[s+t.current.value]="products"}else if(s=="CRMQUOTE"){r.items.selected[s+t.current.value]="quotes"}}}};e.ready(function(){e.addCustomEvent("BX.Main.SelectorV2:onGetEntityTypes",e.CrmUISelector.onGetEntityTypes);e.addCustomEvent("BX.UI.Selector:onSearchRequestCallbackSussess",e.CrmUISelector.onSearchRequestCallbackSussess);e.addCustomEvent("BX.Filter.DestinationSelector:convert",e.CrmUISelector.onFilterDestinationSelectorConvert);e.addCustomEvent("BX.Filter.DestinationSelector:setSelected",e.CrmUISelector.setFilterSelected)})})();
//# sourceMappingURL=crm.selector.map.js